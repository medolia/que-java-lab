package com.medolia.demo.jvm;

import com.medolia.demo.jvm.jol.User;
import org.junit.jupiter.api.Test;
import org.openjdk.jol.info.ClassLayout;

/**
 * @author lbli@trip.com
 * @date 2021/9/15
 */
class JOLTest {

    @Test
    void testBigObj() throws Exception {
        String tmp = "HotelFrontHotelListResponseType{responseStatus=ResponseStatusType{timestamp=java.util.GregorianCalendar[time=1632637205950,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=java.util.SimpleTimeZone[id=,offset=28800000,dstSavings=3600000,useDaylight=false,startYear=0,startMode=0,startMonth=0,startDay=0,startDayOfWeek=0,startTime=0,startTimeMode=0,endMode=0,endMonth=0,endDay=0,endDayOfWeek=0,endTime=0,endTimeMode=0],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2021,MONTH=8,WEEK_OF_YEAR=40,WEEK_OF_MONTH=5,DAY_OF_MONTH=26,DAY_OF_YEAR=269,DAY_OF_WEEK=1,DAY_OF_WEEK_IN_MONTH=4,AM_PM=1,HOUR=2,HOUR_OF_DAY=14,MINUTE=20,SECOND=5,MILLISECOND=950,ZONE_OFFSET=28800000,DST_OFFSET=0], ack=Success, errors=[], build=null, version=null, extension=[]}, hotels=[HotelEntity{summaryInfo=HotelSummaryInfoType{hotelBasicInfo=HotelBasicInfoType{hotelId=5297348, hotelImgInfo=[ImageInfoType{firstImage=http://dimg.fws.qa.nt.ctripcorp.com/images/200m040000000c434EBA8_C_400_600_R5_Q70.jpg, prefix=http://dimg.fws.qa.nt.ctripcorp.com/images, imgSource=, imgUrl=/200m040000000c434EBA8.jpg, imgCenterInfo=null, pictureId=133246872, originURL=/200m040000000c434EBA8.jpg}], hotelVideoInfo=null, hotelVRInfo=null, hotelName=上海窄梯小弄老洋房艺术民宿, hotelEnName=, hotelShortName=窄梯小弄, hotelLocalName=, openYear=20160101, fitmentYear=, roomQuantity=8, hotelAddress=进贤路126号后门, zipCode=200001, hotelTel=18616721659, brandId=0, brandLogo=, superStar=0, hotelDesc=, isGHIHotel=false, masterHotelId=5297348, isBookingHotel=false, hotelBelongTo=HTL, favorityCount=136, shortVideoUrl=, isHightlightHotel=false, hotelCalTel=18616721659, hotelTelInfo=null, browseCount=0, officialEmail=}, commentInfo=CommentInfoType{scoreInfo=[ScoreInfoType{scoreType=1, score=0.0}, ScoreInfoType{scoreType=2, score=0.0}, ScoreInfoType{scoreType=3, score=0.0}, ScoreInfoType{scoreType=4, score=0.0}, ScoreInfoType{scoreType=5, score=0.0}], level=, voter=0, tagList=null, outlandCommentUrl=, isNeedOutComment=false, superCommentList=null, detailBarrageComments=null, similarCommentClauses=null, videoCaptions=null, vendorId=0, hotelRating=0.0, hotelViewClauses=[SuperCommentType{summary=已有136人收藏, headUrl=https://pages.c-ctrip.com/wireless-app/icons/hotel_view/hotel_view_favorite.png}], repurchaseClauses=null, bookedUserClauses=null, browsedUserClauses=null, familyCommentClauses=null, bestCommentSentence=null}, hotelStarInfo=HotelStarInfoType{star=2, starType=0, dStar=0, isLicenseStar=false}, medalInfo=MedalInfoType{medalType=0, description=}, hotelFacilityInfo=null, hotelPositionInfo=HotelPositionType{countryId=1, cityId=2, cityName=上海, zoneNames=[淮海路/新天地], locationName=黄浦区, roadCross=, nearbyPositionDesc=淮海路/新天地, hotelCoordinateInfo=[BasicCoordinate{coordinateType=3, latitude=31.227878728773, longitude=121.46640847007, accuracy=null}, BasicCoordinate{coordinateType=2, latitude=31.221691, longitude=121.459938, accuracy=null}, BasicCoordinate{coordinateType=1, latitude=31.221691, longitude=121.459938, accuracy=null}], hotelAddressInfo=HotelAddressInfoType{address=进贤路126号后门, enAddress=, localAddress=, fullAddress=中国，上海，黄浦区，进贤路126号后门, fullAddressLocal=null, fullAddressEn=null}, zoneIds=[14], provinceId=2, countryName=中国, timeZone=0, continentId=1, locationId=115, zoneInfos=[ZoneInfoType{zoneId=14, zoneName=淮海路/新天地地区, zoneNameEn=null}], cityNameEn=, countryNameEn=, provinceName=上海, provinceNameEn=, locationNameEn=}, trafficInfo=TrafficInfoType{positionShowText=距{0}直线1.3公里 · 上海|商区中心(K11购物艺术中心), positionInfo=距商区中心(K11购物艺术中心)直线1.3公里, poiName=上海, distanceRemark=1.3公里, distType=0, linearDist=1.3138901}, hotelExtraInfo=HotelExtraInfoType{shopRedecorateInfo=ShopRedecorateInfoType{decorateTemplateId=0, secondFloorTemplateId=0, recommendPhysicalRoomId=0}, isCollected=false, isHighRebuyHotel=false, isBrandDegrade=false, disadvantageType=null, featureHotelType=0, isTujiaHotel=null, isInEBKWhiteList=false, isOverseaEBKIM=false, recentBookingText=, isSupportLongShortRent=false, isWowHotel=null, isQiekeHotel=false, videoSuperCommentInfo=null, isPrimeHotel=false, sosoUrl=, recommendInfo=[RecommendInfoType{percentage=0.9598, type=1}, RecommendInfoType{percentage=-1.0, type=4}], isNewHotel=false, graphicShowImages=null, outlineImages=null, isInterHomeHotel=false, whiteBoardDesc=null, recentBookMins=0, primeBenefitList=null, bossRecommendInfo=null, minPriceCustomerCurreny=0, receiveForeignGuest=1, tuJiaOnly=F, hotelCategoryOutlineImages=null, topAwardInfo=null}, contactInfo=null, hotelFeatureTagInfo=[HotelFeatureTagType{featureName=民宿, description=, featureId=489, itemId=10990, itemStyleId=20001, icon=null, img=null, longTag=null}], highLightHotelFeatureTagInfo=null, chineseHotelInfo=ChineseHotelType{hotelType=0, hotelTitle=, hotelDescription=, hotelFacilityList=null}, hotelStayInfo=HotelStayType{isAddressVisible=false, isMinsuHotel=false, isHotelStay=false, hotelFeatureTagList=null, addressFuzzy=, isOverseaHomeStay=false}, flagshipInfo=FlagshipType{logo=, groupName=, star=0, starDescription=, welcomeStr=, flagshipEntrance=FlagshipEntranceType{mgrGroupId=0, entranceTitle=, logoUrl=, rights=null}}, brandInfo=BrandInfoType{brandName=, groupName=, brandLogo=, brandDesc=, star=null, brandDetailImage=, brandEncourage=}, hotelAwardInfo=null, charityInfo=CharityInfoType{donationAmount=, charityIntroduction=}, hotelXpro=HotelXproduct{hotelXproName=null, hotelXproIcon=null, xproductItem=null, productToken=null}}, amountShowType=0, priceInfo=HotelPriceInfo{hotelId=5297348, airlineRoomPrice=0, minPriceRoomInfo=MinPriceRoomInfo{roomId=89352705, shadowId=0, displayPrice=560.00, deletePrice=0, priceDesc=, coverPrice=false, couponId=0, currency=null, hotelPriceDetail=HotelPriceDetail{priceDescList=null, priceTagList=null, taxFeeInfoList=[TaxFeeInfo{key=2, title=不包含, desc=每人每晚￥560.50消费税, amount=1121.00, taxId=0, calculateType=0}, TaxFeeInfo{key=5, title=消费税, desc=null, amount=1121.00, taxId=43, calculateType=5}], priceItemList=null, priceSummaryList=[PriceSummary{priceKey=1, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=2, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=3, title=null, currency=null, amount=1681.00}, PriceSummary{priceKey=4, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=5, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=6, title=null, currency=null, amount=1681.00}, PriceSummary{priceKey=7, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=8, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=9, title=null, currency=null, amount=560.00}]}, traceInfo=MinPriceTraceInfo{roomid=89352705, isshadow=0, shadowId=0, iscanreserve=1, showtype=null, currency=null, orgcurrency=CurrencyInfo{currency=RMB, exchange=1.0}, avgprice=560.0, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0, totalpriceentity=RoomPriceTraceInfo{deckprice=560, currency=null, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0}, ratePlanId=, rateID=, adult=0, childHitAge=null}, oriCurrencyHotelPriceDetail=null, totalHotelPriceDetail=null, oriCurrencyTotalHotelPriceDetail=null, ratePlanId=, roomIdentity=, rateID=, adult=0, childHitAge=null}}, tags=[TagInfoEntity{tagId=10990, subTagId=489, tagPosition=12, tagStyleId=30222, tagTitle=民宿, subTagTitle=, name=, value=, level=0, tagDesc=, labelExtensions=[LabelExtensionEntity{type=featureId, value=489, answers=null}, LabelExtensionEntity{type=urlID, value=8, answers=null}], tagDescTitle=, tagIcon=, tagBelongTo=null}], additionTexts=null, roomInfo=SimpleRoomInfoEntity{sellRoomId=89352705, shadowId=0, sellRoomName=北欧简白浪漫榻榻米MINI屋, physicalRoomName=北欧简白浪漫榻榻米MINI屋, roomCodeDesc=BGFDPZ, propertyValueIds=[5, 931779], roomArea=null, bedTypeEntities=null, bedTypeDesc=床型随机安排, rateID=, adult=0, pictureInfo=null, windowInfo=WindowInfoEntity{windowDesc=有窗, windowType=2}, mealInfo=MealInfoEntity{mealSummaryDesc=2份早餐, mealDetailModel=null, mealInfoDetail=null, propertyMealInfo=null}, childHitAge=null}, isFullRoom=false, isADHotel=false, isAdPosition=false, isPoiRecommend=null, adTraceid=, isNoPriceHotel=false, isTopRecommend=false, isFullRoomCanFold=false, isFullRoomCanApply=false, hotelVendorCode=, distance=1.3138901, sosoUrl=, homeGroupId=null, isNewPrimeHotel=false, ctripDiscount=0.0, isCtripGroupMembership=false, fireFlyLogoUrl=/200m040000000c434EBA8.jpg, minPriceRoomTrace=null, minPriceDetailInfo=, extras={MaskDifAvgCnyPrice=0, AdTagCategory=0}, listTagTraceInfo=, priceInfoExtra=PriceInfoExtra{avgPriceAfterDiscountWithoutTax=null, veilDifPrice=null, prepayDiscounts=null, avgPriceWithoutTax=560.0, bestCoupon=null, totalPriceIncludeTaxPerRoom=560.0, totalPriceIncludeTaxAfterDiscountPerRoom=560.0, totalPriceInfo=HotelPriceInfo{hotelId=5297348, airlineRoomPrice=0, minPriceRoomInfo=MinPriceRoomInfo{roomId=89352705, shadowId=0, displayPrice=560.00, deletePrice=0, priceDesc=, coverPrice=false, couponId=0, currency=null, hotelPriceDetail=HotelPriceDetail{priceDescList=[PriceDescInfo{key=1, desc=每间1晚总价, style=0}], priceTagList=null, taxFeeInfoList=[TaxFeeInfo{key=2, title=不包含, desc=每人每晚￥560.50消费税, amount=1121.00, taxId=0, calculateType=0}, TaxFeeInfo{key=5, title=消费税, desc=null, amount=1121.00, taxId=43, calculateType=5}], priceItemList=null, priceSummaryList=[PriceSummary{priceKey=1, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=2, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=3, title=null, currency=null, amount=1681.00}, PriceSummary{priceKey=4, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=5, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=6, title=null, currency=null, amount=1681.00}, PriceSummary{priceKey=7, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=8, title=null, currency=null, amount=560.00}, PriceSummary{priceKey=9, title=null, currency=null, amount=560.00}]}, traceInfo=MinPriceTraceInfo{roomid=89352705, isshadow=0, shadowId=0, iscanreserve=1, showtype=null, currency=null, orgcurrency=CurrencyInfo{currency=RMB, exchange=1.0}, avgprice=560.0, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0, totalpriceentity=RoomPriceTraceInfo{deckprice=560, currency=null, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0}, ratePlanId=, rateID=, adult=0, childHitAge=null}, oriCurrencyHotelPriceDetail=null, totalHotelPriceDetail=null, oriCurrencyTotalHotelPriceDetail=null, ratePlanId=, roomIdentity=, rateID=, adult=0, childHitAge=null}}, dailyPriceList=[DailyPriceEntity{effectDate=20210926, customAmount=560.0, pPbreakfast=2, fGbreakfast=0, pPprice=560.0, fGprice=-1.0, ppCost=448.0, fgCost=-1.0, customerPPprice=560.0, customerFGprice=-1.0, prepayDiscountDList=[]}], roomTicketGitIds=null, roomStatusPriceInfo=null, customerPriceInfo=null}, hasPrepayDiscountWithInventory=false, hourRoomHours=0, flashSale=FlashSaleInfo{saleState=0, startDate=null, endDate=null}, hourEarliestArriveTime=0, hourLatestArriveTime=0, isIgnoreFilterHotel=false, payType=1, saleRoom=SaleRoom{rateCodeId=41, mealType=4, mealNum=2, giftId=0, comboId=0, propertyValueIds=[5, 931779], vendorId=241, hotelPlatformSupplierId=4734, person=2, roomStatusRatePlanId=0, subHotelId=5309812, bargainInfo=null}, favoriteHotel=null, isIgnoreRoomFilterHotel=false, topRecReasonCategory=null, topRecReasonTag=null, subPayType=0, detailBannerPlaceholder=null}, HotelEntity{summaryInfo=HotelSummaryInfoType{hotelBasicInfo=HotelBasicInfoType{hotelId=5799234, hotelImgInfo=[ImageInfoType{firstImage=http://dimg.fws.qa.nt.ctripcorp.com/images/200g070000002qo6r0583_C_400_600_R5_Q70.jpg, prefix=http://dimg.fws.qa.nt.ctripcorp.com/images, imgSource=, imgUrl=/200g070000002qo6r0583.jpg, imgCenterInfo=null, pictureId=144360332, originURL=/200g070000002qo6r0583.jpg}], hotelVideoInfo=null, hotelVRInfo=null, hotelName=上海ZigHouse之宿·老洋房艺术民宿, hotelEnName=, hotelShortName=ZigHouse之宿, hotelLocalName=, openYear=20160301, fitmentYear=, roomQuantity=13, hotelAddress=南昌路24弄9号, zipCode=, hotelTel=18201896554, brandId=0, brandLogo=, superStar=0, hotelDesc=, isGHIHotel=false, masterHotelId=5799234, isBookingHotel=false, hotelBelongTo=HTL, favorityCount=188, shortVideoUrl=, isHightlightHotel=false, hotelCalTel=18201896554, hotelTelInfo=null, browseCount=0, officialEmail=}, commentInfo=CommentInfoType{scoreInfo=[ScoreInfoType{scoreType=1, score=0.0}, ScoreInfoType{scoreType=2, score=0.0}, ScoreInfoType{scoreType=3, score=0.0}, ScoreInfoType{scoreType=4, score=0.0}, ScoreInfoType{scoreType=5, score=0.0}], level=, voter=0, tagList=null, outlandCommentUrl=, isNeedOutComment=false, superCommentList=null, detailBarrageComments=null, similarCommentClauses=null, videoCaptions=null, vendorId=0, hotelRating=0.0, hotelViewClauses=[SuperCommentType{summary=已有188人收藏, headUrl=https://pages.c-ctrip.com/wireless-app/icons/hotel_view/hotel_view_favorite.png}], repurchaseClauses=null, bookedUserClauses=null, browsedUserClauses=null, familyCommentClauses=null, bestCommentSentence=null}, hotelStarInfo=HotelStarInfoType{star=2, starType=0, dStar=0, isLicenseStar=false}, medalInfo=MedalInfoType{medalType=0, description=}, hotelFacilityInfo=null, hotelPositionInfo=HotelPositionType{countryId=1, cityId=2, cityName=上海, zoneNames=[淮海路/新天地], locationName=黄浦区, roadCross=, nearbyPositionDesc=淮海路/新天地, hotelCoordinateInfo=[BasicCoordinate{coordinateType=3, latitude=31.225396, longitude=121.477739, accuracy=null}, BasicCoordinate{coordinateType=2, latitude=31.219415393709, longitude=121.47121646762, accuracy=null}, BasicCoordinate{coordinateType=1, latitude=31.219415393709, longitude=121.47121646762, accuracy=null}], hotelAddressInfo=HotelAddressInfoType{address=南昌路24弄9号, enAddress=, localAddress=, fullAddress=中国，上海，黄浦区，南昌路24弄9号, fullAddressLocal=null, fullAddressEn=null}, zoneIds=[14], provinceId=2, countryName=中国, timeZone=0, continentId=1, locationId=115, zoneInfos=[ZoneInfoType{zoneId=14, zoneName=淮海路/新天地地区, zoneNameEn=null}], cityNameEn=, countryNameEn=, provinceName=上海, provinceNameEn=, locationNameEn=}, trafficInfo=TrafficInfoType{positionShowText=距{0}直线500米 · 上海|商区中心(K11购物艺术中心), positionInfo=距商区中心(K11购物艺术中心)直线500米, poiName=上海, distanceRemark=500米, distType=0, linearDist=0.5097623}, hotelExtraInfo=HotelExtraInfoType{shopRedecorateInfo=ShopRedecorateInfoType{decorateTemplateId=0, secondFloorTemplateId=0, recommendPhysicalRoomId=0}, isCollected=false, isHighRebuyHotel=false, isBrandDegrade=false, disadvantageType=null, featureHotelType=0, isTujiaHotel=null, isInEBKWhiteList=false, isOverseaEBKIM=false, recentBookingText=, isSupportLongShortRent=false, isWowHotel=null, isQiekeHotel=false, videoSuperCommentInfo=null, isPrimeHotel=false, sosoUrl=, recommendInfo=[RecommendInfoType{percentage=0.9753, type=1}, RecommendInfoType{percentage=-1.0, type=4}], isNewHotel=false, graphicShowImages=null, outlineImages=null, isInterHomeHotel=false, whiteBoardDesc=null, recentBookMins=0, primeBenefitList=null, bossRecommendInfo=null, minPriceCustomerCurreny=0, receiveForeignGuest=1, tuJiaOnly=F, hotelCategoryOutlineImages=null, topAwardInfo=null}, contactInfo=null, hotelFeatureTagInfo=[HotelFeatureTagType{featureName=民宿, description=, featureId=489, itemId=10990, itemStyleId=20001, icon=null, img=null, longTag=null}], highLightHotelFeatureTagInfo=null, chineseHotelInfo=ChineseHotelType{hotelType=0, hotelTitle=, hotelDescription=, hotelFacilityList=null}, hotelStayInfo=HotelStayType{isAddressVisible=false, isMinsuHotel=false, isHotelStay=false, hotelFeatureTagList=null, addressFuzzy=, isOverseaHomeStay=false}, flagshipInfo=FlagshipType{logo=, groupName=, star=0, starDescription=, welcomeStr=, flagshipEntrance=FlagshipEntranceType{mgrGroupId=0, entranceTitle=, logoUrl=, rights=null}}, brandInfo=BrandInfoType{brandName=, groupName=, brandLogo=, brandDesc=, star=null, brandDetailImage=, brandEncourage=}, hotelAwardInfo=null, charityInfo=CharityInfoType{donationAmount=, charityIntroduction=}, hotelXpro=HotelXproduct{hotelXproName=null, hotelXproIcon=null, xproductItem=null, productToken=null}}, amountShowType=0, priceInfo=HotelPriceInfo{hotelId=5799234, airlineRoomPrice=0, minPriceRoomInfo=MinPriceRoomInfo{roomId=39377486, shadowId=0, displayPrice=365.00, deletePrice=0, priceDesc=, coverPrice=false, couponId=0, currency=null, hotelPriceDetail=HotelPriceDetail{priceDescList=null, priceTagList=null, taxFeeInfoList=[TaxFeeInfo{key=2, title=不包含, desc=每人每晚￥560.50消费税, amount=1121.00, taxId=0, calculateType=0}, TaxFeeInfo{key=5, title=消费税, desc=null, amount=1121.00, taxId=43, calculateType=5}], priceItemList=null, priceSummaryList=[PriceSummary{priceKey=1, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=2, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=3, title=null, currency=null, amount=1486.00}, PriceSummary{priceKey=4, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=5, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=6, title=null, currency=null, amount=1486.00}, PriceSummary{priceKey=7, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=8, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=9, title=null, currency=null, amount=365.00}]}, traceInfo=MinPriceTraceInfo{roomid=39377486, isshadow=0, shadowId=0, iscanreserve=1, showtype=null, currency=null, orgcurrency=CurrencyInfo{currency=RMB, exchange=1.0}, avgprice=365.0, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0, totalpriceentity=RoomPriceTraceInfo{deckprice=365, currency=null, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0}, ratePlanId=, rateID=, adult=0, childHitAge=null}, oriCurrencyHotelPriceDetail=null, totalHotelPriceDetail=null, oriCurrencyTotalHotelPriceDetail=null, ratePlanId=, roomIdentity=, rateID=, adult=0, childHitAge=null}}, tags=[TagInfoEntity{tagId=10245, subTagId=0, tagPosition=2, tagStyleId=30222, tagTitle=亲子房, subTagTitle=, name=, value=, level=0, tagDesc=, labelExtensions=[], tagDescTitle=, tagIcon=, tagBelongTo=null}, TagInfoEntity{tagId=10990, subTagId=489, tagPosition=12, tagStyleId=30222, tagTitle=民宿, subTagTitle=, name=, value=, level=0, tagDesc=, labelExtensions=[LabelExtensionEntity{type=featureId, value=489, answers=null}, LabelExtensionEntity{type=urlID, value=8, answers=null}], tagDescTitle=, tagIcon=, tagBelongTo=null}], additionTexts=null, roomInfo=SimpleRoomInfoEntity{sellRoomId=39377486, shadowId=0, sellRoomName=复古英伦轻奢大床房, physicalRoomName=复古英伦轻奢大床房, roomCodeDesc=A6PU1, propertyValueIds=[460276, 5498302, 5582526], roomArea=null, bedTypeEntities=null, bedTypeDesc=床型随机安排, rateID=, adult=0, pictureInfo=null, windowInfo=WindowInfoEntity{windowDesc=有窗, windowType=2}, mealInfo=MealInfoEntity{mealSummaryDesc=2份早餐+2份午餐, mealDetailModel=null, mealInfoDetail=null, propertyMealInfo=null}, childHitAge=null}, isFullRoom=false, isADHotel=false, isAdPosition=false, isPoiRecommend=null, adTraceid=, isNoPriceHotel=false, isTopRecommend=false, isFullRoomCanFold=false, isFullRoomCanApply=false, hotelVendorCode=, distance=0.5097623, sosoUrl=, homeGroupId=50342, isNewPrimeHotel=false, ctripDiscount=0.0, isCtripGroupMembership=false, fireFlyLogoUrl=/200g070000002qo6r0583.jpg, minPriceRoomTrace=null, minPriceDetailInfo=, extras={MaskDifAvgCnyPrice=0, AdTagCategory=0}, listTagTraceInfo=, priceInfoExtra=PriceInfoExtra{avgPriceAfterDiscountWithoutTax=null, veilDifPrice=null, prepayDiscounts=null, avgPriceWithoutTax=365.0, bestCoupon=null, totalPriceIncludeTaxPerRoom=365.0, totalPriceIncludeTaxAfterDiscountPerRoom=365.0, totalPriceInfo=HotelPriceInfo{hotelId=5799234, airlineRoomPrice=0, minPriceRoomInfo=MinPriceRoomInfo{roomId=39377486, shadowId=0, displayPrice=365.00, deletePrice=0, priceDesc=, coverPrice=false, couponId=0, currency=null, hotelPriceDetail=HotelPriceDetail{priceDescList=[PriceDescInfo{key=1, desc=每间1晚总价, style=0}], priceTagList=null, taxFeeInfoList=[TaxFeeInfo{key=2, title=不包含, desc=每人每晚￥560.50消费税, amount=1121.00, taxId=0, calculateType=0}, TaxFeeInfo{key=5, title=消费税, desc=null, amount=1121.00, taxId=43, calculateType=5}], priceItemList=null, priceSummaryList=[PriceSummary{priceKey=1, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=2, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=3, title=null, currency=null, amount=1486.00}, PriceSummary{priceKey=4, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=5, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=6, title=null, currency=null, amount=1486.00}, PriceSummary{priceKey=7, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=8, title=null, currency=null, amount=365.00}, PriceSummary{priceKey=9, title=null, currency=null, amount=365.00}]}, traceInfo=MinPriceTraceInfo{roomid=39377486, isshadow=0, shadowId=0, iscanreserve=1, showtype=null, currency=null, orgcurrency=CurrencyInfo{currency=RMB, exchange=1.0}, avgprice=365.0, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0, totalpriceentity=RoomPriceTraceInfo{deckprice=365, currency=null, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0}, ratePlanId=, rateID=, adult=0, childHitAge=null}, oriCurrencyHotelPriceDetail=null, totalHotelPriceDetail=null, oriCurrencyTotalHotelPriceDetail=null, ratePlanId=, roomIdentity=, rateID=, adult=0, childHitAge=null}}, dailyPriceList=[DailyPriceEntity{effectDate=20210926, customAmount=365.0, pPbreakfast=2, fGbreakfast=0, pPprice=365.0, fGprice=-1.0, ppCost=292.0, fgCost=-1.0, customerPPprice=365.0, customerFGprice=-1.0, prepayDiscountDList=[]}], roomTicketGitIds=null, roomStatusPriceInfo=null, customerPriceInfo=null}, hasPrepayDiscountWithInventory=false, hourRoomHours=0, flashSale=FlashSaleInfo{saleState=0, startDate=null, endDate=null}, hourEarliestArriveTime=0, hourLatestArriveTime=0, isIgnoreFilterHotel=false, payType=1, saleRoom=SaleRoom{rateCodeId=6, mealType=6, mealNum=2, giftId=0, comboId=0, propertyValueIds=[460276, 5498302, 5582526], vendorId=188, hotelPlatformSupplierId=3272, person=2, roomStatusRatePlanId=0, subHotelId=5816054, bargainInfo=null}, favoriteHotel=null, isIgnoreRoomFilterHotel=false, topRecReasonCategory=null, topRecReasonTag=null, subPayType=0, detailBannerPlaceholder=null}, HotelEntity{summaryInfo=HotelSummaryInfoType{hotelBasicInfo=HotelBasicInfoType{hotelId=4524566, hotelImgInfo=[ImageInfoType{firstImage=http://dimg.fws.qa.nt.ctripcorp.com/images/20020a00000056t4h9E7F_C_400_600_R5_Q70.jpg, prefix=http://dimg.fws.qa.nt.ctripcorp.com/images, imgSource=, imgUrl=/20020a00000056t4h9E7F.jpg, imgCenterInfo=null, pictureId=156185043, originURL=/20020a00000056t4h9E7F.jpg}], hotelVideoInfo=null, hotelVRInfo=null, hotelName=上海帼苑宾馆, hotelEnName=, hotelShortName=帼苑宾馆, hotelLocalName=, openYear=20160201, fitmentYear=, roomQuantity=19, hotelAddress=淮海中路701号9楼（农业银行楼上）, zipCode=, hotelTel=021-53822488, brandId=0, brandLogo=, superStar=0, hotelDesc=, isGHIHotel=false, masterHotelId=4524566, isBookingHotel=false, hotelBelongTo=HTL, favorityCount=0, shortVideoUrl=, isHightlightHotel=false, hotelCalTel=021-53822488, hotelTelInfo=null, browseCount=0, officialEmail=}, commentInfo=CommentInfoType{scoreInfo=[ScoreInfoType{scoreType=1, score=0.0}, ScoreInfoType{scoreType=2, score=0.0}, ScoreInfoType{scoreType=3, score=0.0}, ScoreInfoType{scoreType=4, score=0.0}, ScoreInfoType{scoreType=5, score=0.0}], level=, voter=0, tagList=null, outlandCommentUrl=, isNeedOutComment=false, superCommentList=null, detailBarrageComments=null, similarCommentClauses=null, videoCaptions=null, vendorId=0, hotelRating=0.0, hotelViewClauses=null, repurchaseClauses=null, bookedUserClauses=null, browsedUserClauses=null, familyCommentClauses=null, bestCommentSentence=null}, hotelStarInfo=HotelStarInfoType{star=2, starType=0, dStar=0, isLicenseStar=false}, medalInfo=MedalInfoType{medalType=0, description=}, hotelFacilityInfo=null, hotelPositionInfo=HotelPositionType{countryId=1, cityId=2, cityName=上海, zoneNames=[淮海路/新天地], locationName=黄浦区, roadCross=, nearbyPositionDesc=淮海路/新天地, hotelCoordinateInfo=[BasicCoordinate{coordinateType=3, latitude=31.225284319508, longitude=121.47161167219, accuracy=null}, BasicCoordinate{coordinateType=2, latitude=31.21932734398011, longitude=121.4651137409444, accuracy=null}, BasicCoordinate{coordinateType=1, latitude=31.21932734398011, longitude=121.4651137409444, accuracy=null}], hotelAddressInfo=HotelAddressInfoType{address=淮海中路701号9楼（农业银行楼上）, enAddress=, localAddress=, fullAddress=中国，上海，黄浦区，淮海中路701号9楼（农业银行楼上）, fullAddressLocal=null, fullAddressEn=null}, zoneIds=[14], provinceId=2, countryName=中国, timeZone=0, continentId=1, locationId=115, zoneInfos=[ZoneInfoType{zoneId=14, zoneName=淮海路/新天地地区, zoneNameEn=null}], cityNameEn=, countryNameEn=, provinceName=上海, provinceNameEn=, locationNameEn=}, trafficInfo=TrafficInfoType{positionShowText=距{0}直线950米 · 上海|商区中心(K11购物艺术中心), positionInfo=距商区中心(K11购物艺术中心)直线950米, poiName=上海, distanceRemark=950米, distType=0, linearDist=0.9311124}, hotelExtraInfo=HotelExtraInfoType{shopRedecorateInfo=ShopRedecorateInfoType{decorateTemplateId=0, secondFloorTemplateId=0, recommendPhysicalRoomId=0}, isCollected=false, isHighRebuyHotel=false, isBrandDegrade=false, disadvantageType=null, featureHotelType=0, isTujiaHotel=null, isInEBKWhiteList=false, isOverseaEBKIM=false, recentBookingText=, isSupportLongShortRent=false, isWowHotel=null, isQiekeHotel=false, videoSuperCommentInfo=null, isPrimeHotel=false, sosoUrl=, recommendInfo=[RecommendInfoType{percentage=0.8723, type=1}, RecommendInfoType{percentage=-1.0, type=4}], isNewHotel=false, graphicShowImages=null, outlineImages=null, isInterHomeHotel=false, whiteBoardDesc=null, recentBookMins=0, primeBenefitList=null, bossRecommendInfo=null, minPriceCustomerCurreny=0, receiveForeignGuest=3, tuJiaOnly=F, hotelCategoryOutlineImages=null, topAwardInfo=null}, contactInfo=null, hotelFeatureTagInfo=null, highLightHotelFeatureTagInfo=null, chineseHotelInfo=ChineseHotelType{hotelType=0, hotelTitle=, hotelDescription=, hotelFacilityList=null}, hotelStayInfo=HotelStayType{isAddressVisible=false, isMinsuHotel=false, isHotelStay=false, hotelFeatureTagList=null, addressFuzzy=, isOverseaHomeStay=false}, flagshipInfo=FlagshipType{logo=, groupName=, star=0, starDescription=, welcomeStr=, flagshipEntrance=FlagshipEntranceType{mgrGroupId=0, entranceTitle=, logoUrl=, rights=null}}, brandInfo=BrandInfoType{brandName=, groupName=, brandLogo=, brandDesc=, star=null, brandDetailImage=, brandEncourage=}, hotelAwardInfo=null, charityInfo=CharityInfoType{donationAmount=, charityIntroduction=}, hotelXpro=HotelXproduct{hotelXproName=null, hotelXproIcon=null, xproductItem=null, productToken=null}}, amountShowType=0, priceInfo=HotelPriceInfo{hotelId=4524566, airlineRoomPrice=0, minPriceRoomInfo=MinPriceRoomInfo{roomId=89623089, shadowId=0, displayPrice=337.00, deletePrice=0, priceDesc=, coverPrice=false, couponId=0, currency=null, hotelPriceDetail=HotelPriceDetail{priceDescList=null, priceTagList=null, taxFeeInfoList=[TaxFeeInfo{key=2, title=不包含, desc=每人每晚￥560.50消费税, amount=1121.00, taxId=0, calculateType=0}, TaxFeeInfo{key=5, title=消费税, desc=null, amount=1121.00, taxId=43, calculateType=5}], priceItemList=null, priceSummaryList=[PriceSummary{priceKey=1, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=2, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=3, title=null, currency=null, amount=1458.00}, PriceSummary{priceKey=4, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=5, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=6, title=null, currency=null, amount=1458.00}, PriceSummary{priceKey=7, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=8, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=9, title=null, currency=null, amount=337.00}]}, traceInfo=MinPriceTraceInfo{roomid=89623089, isshadow=0, shadowId=0, iscanreserve=1, showtype=null, currency=null, orgcurrency=CurrencyInfo{currency=RMB, exchange=1.0}, avgprice=337.0, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0, totalpriceentity=RoomPriceTraceInfo{deckprice=337, currency=null, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0}, ratePlanId=, rateID=, adult=0, childHitAge=null}, oriCurrencyHotelPriceDetail=null, totalHotelPriceDetail=null, oriCurrencyTotalHotelPriceDetail=null, ratePlanId=, roomIdentity=, rateID=, adult=0, childHitAge=null}}, tags=[TagInfoEntity{tagId=10245, subTagId=0, tagPosition=2, tagStyleId=30222, tagTitle=携程亲子房, subTagTitle=, name=, value=, level=0, tagDesc=, labelExtensions=[], tagDescTitle=, tagIcon=, tagBelongTo=null}], additionTexts=null, roomInfo=SimpleRoomInfoEntity{sellRoomId=89623089, shadowId=0, sellRoomName=标准大床房, physicalRoomName=标准大床房, roomCodeDesc=BG0WHM, propertyValueIds=[6], roomArea=null, bedTypeEntities=null, bedTypeDesc=床型随机安排, rateID=, adult=0, pictureInfo=null, windowInfo=WindowInfoEntity{windowDesc=无窗, windowType=0}, mealInfo=MealInfoEntity{mealSummaryDesc=无餐食, mealDetailModel=null, mealInfoDetail=null, propertyMealInfo=null}, childHitAge=null}, isFullRoom=false, isADHotel=false, isAdPosition=false, isPoiRecommend=null, adTraceid=, isNoPriceHotel=false, isTopRecommend=false, isFullRoomCanFold=false, isFullRoomCanApply=false, hotelVendorCode=, distance=0.9311124, sosoUrl=, homeGroupId=null, isNewPrimeHotel=false, ctripDiscount=0.0, isCtripGroupMembership=false, fireFlyLogoUrl=/20020a00000056t4h9E7F.jpg, minPriceRoomTrace=null, minPriceDetailInfo=, extras={MaskDifAvgCnyPrice=0, AdTagCategory=0}, listTagTraceInfo=, priceInfoExtra=PriceInfoExtra{avgPriceAfterDiscountWithoutTax=null, veilDifPrice=null, prepayDiscounts=null, avgPriceWithoutTax=337.0, bestCoupon=null, totalPriceIncludeTaxPerRoom=337.0, totalPriceIncludeTaxAfterDiscountPerRoom=337.0, totalPriceInfo=HotelPriceInfo{hotelId=4524566, airlineRoomPrice=0, minPriceRoomInfo=MinPriceRoomInfo{roomId=89623089, shadowId=0, displayPrice=337.00, deletePrice=0, priceDesc=, coverPrice=false, couponId=0, currency=null, hotelPriceDetail=HotelPriceDetail{priceDescList=[PriceDescInfo{key=1, desc=每间1晚总价, style=0}], priceTagList=null, taxFeeInfoList=[TaxFeeInfo{key=2, title=不包含, desc=每人每晚￥560.50消费税, amount=1121.00, taxId=0, calculateType=0}, TaxFeeInfo{key=5, title=消费税, desc=null, amount=1121.00, taxId=43, calculateType=5}], priceItemList=null, priceSummaryList=[PriceSummary{priceKey=1, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=2, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=3, title=null, currency=null, amount=1458.00}, PriceSummary{priceKey=4, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=5, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=6, title=null, currency=null, amount=1458.00}, PriceSummary{priceKey=7, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=8, title=null, currency=null, amount=337.00}, PriceSummary{priceKey=9, title=null, currency=null, amount=337.00}]}, traceInfo=MinPriceTraceInfo{roomid=89623089, isshadow=0, shadowId=0, iscanreserve=1, showtype=null, currency=null, orgcurrency=CurrencyInfo{currency=RMB, exchange=1.0}, avgprice=337.0, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0, totalpriceentity=RoomPriceTraceInfo{deckprice=337, currency=null, cashbackamount=0, couponamount=0, reductionamount=0, taxfee=0}, ratePlanId=, rateID=, adult=0, childHitAge=null}, oriCurrencyHotelPriceDetail=null, totalHotelPriceDetail=null, oriCurrencyTotalHotelPriceDetail=null, ratePlanId=, roomIdentity=, rateID=, adult=0, childHitAge=null}}, dailyPriceList=[DailyPriceEntity{effectDate=20210926, customAmount=337.0, pPbreakfast=0, fGbreakfast=0, pPprice=337.0, fGprice=-1.0, ppCost=269.6, fgCost=-1.0, customerPPprice=337.0, customerFGprice=-1.0, prepayDiscountDList=[]}], roomTicketGitIds=null, roomStatusPriceInfo=null, customerPriceInfo=null}, hasPrepayDiscountWithInventory=false, hourRoomHours=0, flashSale=FlashSaleInfo{saleState=0, startDate=null, endDate=null}, hourEarliestArriveTime=0, hourLatestArriveTime=0, isIgnoreFilterHotel=false, payType=1, saleRoom=SaleRoom{rateCodeId=416, mealType=4, mealNum=0, giftId=0, comboId=0, propertyValueIds=[6], vendorId=188, hotelPlatformSupplierId=3272, person=2, roomStatusRatePlanId=0, subHotelId=4921425, bargainInfo=null}, favoriteHotel=null, isIgnoreRoomFilterHotel=false, topRecReasonCategory=null, topRecReasonTag=null, subPayType=0, detailBannerPlaceholder=null}, HotelEntity{summaryInfo=HotelSummaryInfoType{hotelBasicInfo=HotelBasicInfoType{hotelId=3735106, hotelImgInfo=[ImageInfoType{firstImage=http://dimg.fws.qa.nt.ctripcorp.com/images/fd/hotel/g3/M02/47/7A/CggYGlZv53KANMDTAAI1QTHfdOc747_C_400_600_R5_Q70.jpg, prefix=http://dimg.fws.qa.nt.ctripcorp.com/images, imgSource=, imgUrl=/fd/hotel/g3/M02/47/7A/CggYGlZv53KANMDTAAI1QTHfdOc747.jpg, imgCenterInfo=null, pictureId=112595357, origi";
        // 只能通过反射获取Unsafe对象的实例

        System.out.println(tmp.getBytes().length);
    }

    /**
     * OFFSET  SIZE               TYPE DESCRIPTION                               VALUE
     * 0     4                    (object header)                           01 d8 a3 70 (0|0000|001 11011000 10100011 01110000) (1889785857)
     * 4     4                    (object header)                           2a 00 00 00 (0|0101010 00000000 00000000 00000000) (42)
     * 8     4                    (object header)                           62 47 02 f8 (01100010 01000111 00000010 11111000) (-134068382)
     * JAVA 为大端序（从下往上读），klass pointer （4B） 为 f8 02 47 62
     * mark word （8B） 为
     * unused (25 bit) 00000000 00000000 00000000 0
     * hashcode (31 bit) 0101010 01110000 10100011 11011000 对应数 712025048。注意重写之后的 hashcode 不会写入 mark word 里
     * unused (1 bit) 0
     * 分代年龄 (4 bit) 0000
     * 偏向锁 (1 bit) 锁标志位 (2 bit) 0 01
     */
    @Test
    void testNormalObj() {
        com.medolia.demo.jvm.jol.User user = new com.medolia.demo.jvm.jol.User();
        user.setName("que");
        System.out.println(user.hashCode());
        //查看对象的内存布局
        System.out.println(ClassLayout.parseInstance(user).toPrintable());
    }

    /**
     * OFFSET  SIZE                                TYPE DESCRIPTION                               VALUE
     * 0     4                                     (object header)                           01 00 00 00 (00000001 00000000 00000000 00000000) (1)
     * 4     4                                     (object header)                           00 00 00 00 (00000000 00000000 00000000 00000000) (0)
     * 8     4                                     (object header)                           a8 47 02 f8 (10101000 01000111 00000010 11111000) (-134068312)
     * 12     4                                     (object header)                           02 00 00 00 (00000010 00000000 00000000 00000000) (2)
     * 16     8   com.medolia.demo.jvm.jol.User User;.<elements>                          N/A
     * <p>
     * 对于数组，会多出一行定义数组长度，这里为 2
     */
    @Test
    void testNormalArray() {
        com.medolia.demo.jvm.jol.User[] users = new com.medolia.demo.jvm.jol.User[]{new com.medolia.demo.jvm.jol.User(), new com.medolia.demo.jvm.jol.User()};
        System.out.println(ClassLayout.parseInstance(users).toPrintable());
    }

    /**
     * 两个对象的 klass pointer (4B) 相同
     * 64位虚拟机中 默认开启指针压缩，原本 8B 的指针压缩至 4B；
     * 当内存分配大于 32GB 或关闭指针压缩时，该部分大小会变为 8B；
     */
    @Test
    void testKlassPointer() {
        com.medolia.demo.jvm.jol.User[] users = new com.medolia.demo.jvm.jol.User[]{new com.medolia.demo.jvm.jol.User(), new com.medolia.demo.jvm.jol.User()};
        for (User user : users) {
            System.out.println(user.hashCode());
            System.out.println(ClassLayout.parseInstance(user).toPrintable());
        }
    }

    @Test
    void binaryToInt() {
        String binary = "0101010 01110000 10100011 11011000";
        int hash = 712025048;
        String hashStr = Integer.toBinaryString(hash);
        if (hashStr.length() < 31) {
            hashStr = addPadding(hashStr);
        }
        System.out.printf("binary: %s, hashStr: %s", binary, hashStr);
    }

    private String addPadding(String hashStr) {
        StringBuilder tmp = new StringBuilder();
        int padding = 31 - hashStr.length();
        while (padding > 0) {
            tmp.append("0");
            padding--;
        }
        hashStr = tmp.append(hashStr).toString();
        return hashStr;
    }
}